<?php

namespace Prj\Events\JavaEvt;

/**
 * 定期回款成功
 * @author simon.wang
 */
use Lib\Misc\Result;
use Prj\Bll\Finals\UserFinal;
USE Prj\Loger;

class ReturnTimeOk extends \Sooh2\EvtQue\EvtProcess{

    public function init($evtData)
    {
        \Prj\Loger::setKv(get_called_class());
        return parent::init($evtData); // TODO: Change the autogenerated stub
    }

    public function onEvt()
    {
        $userId = $this->evtData->userId;
        $msg = 'done';
        error_log("trace event on ".__CLASS__.' with data='. json_encode($this->evtData));
        $ret = $this->sendReturnTimeOkSms($this->evtData->objId);
        return $msg.",sendReturnTimeOkSms".$ret;
    }



    public function sendReturnTimeOkSms($orderNo){
        $params = [
            'orderNo'   =>  $orderNo
        ];
        return \Prj\Bll\SendSmsForEvt::getInstance()->sendReturnTimeOkMsg($params);
    }

}

