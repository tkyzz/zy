<?php
/**
 * Created by PhpStorm.
 * User: amdin
 * Date: 2017/8/1
 * Time: 16:35
 */
namespace Prj\Model\Payment;

use Prj\Model\_ModelBase;

class AccountBankBind extends _ModelBase
{
    public static $type_bind = 'BIND';
    public static $type_unbind = 'UNBIND';

    public function onInit()
    {
        $this->className = "Payment";
        parent::onInit(); // TODO: Change the autogenerated stub
        $this->_tbName = "t_account_bank_info";
    }

    public static function hasBind($userId){
        $record = self::getRecord(null , ['userId' => $userId , 'status' => self::$type_bind]);
        return empty($record) ? false : true;
    }

    public static function unbindCount($userId){
        $total = self::getCount(['userId' => $userId , 'status' => self::$type_unbind]);
        return $total - 0;
    }
}